void main(out float4 color : COLOR) {
    short bgNum = short(screenPos.z);

    color = tex2D(display3dTex, screenPosF);
    if (!can_display(bgNum)) {
        discard;
    }

    if (color.a == 0.0) {
        discard;
    }

    short priority = short(bgCnt & 3);
    color.a = float(priority) / 4.0;
}
